(this.webpackJsonpimagesearch=this.webpackJsonpimagesearch||[]).push([[0],{32:function(e,t,a){e.exports=a(64)},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),i=a(5),s=a(23),l=a(3),u=a(7),m={selected:"",isLoading:!1,error:"",theme:"light",data:{photo:[]}},h={theme:"light"},g=Object(l.c)({images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_IMAGES":return Object(u.a)({},e,{data:Object(u.a)({},t.payload),error:""});case"IMAGE_SELECTED":return Object(u.a)({},e,{selected:t.payload});case"IS_LOADING":return Object(u.a)({},e,{isLoading:t.status});case"ADD_ERROR":return Object(u.a)({},e,{error:t.error});default:return e}},themes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_THEME":return{theme:t.payload};default:return e}}}),d=a(24),f=a(2),p=a(9),E=a.n(p),b=a(25),v=a(26),O=a.n(v).a.create({baseURL:"https://www.flickr.com/services/rest/"}),j=function(e){return{type:"IS_LOADING",status:e}},k=function(e){return{type:"CHANGE_THEME",payload:e}},y=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];clearTimeout(a),a=setTimeout((function(){return e.apply(void 0,r)}),t)}},w=function(e){for(var t=e.imagesPerPage,a=e.totalPosts,c=e.paginate,o=Object(n.useState)(1),i=Object(f.a)(o,2),s=i[0],l=i[1],u=[],m=1;m<=Math.round(a/t);m++)u.push(m);var h=function(e){return["page-item",s===e?"selected":""].join(" ")};return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination-container"},u.map((function(e){return r.a.createElement("li",{key:e,className:h(e),onClick:function(){return function(e){c(e),l(e)}(e)}},r.a.createElement("div",null,e))}))))},S=function(e){var t=e.images,a=e.onImageSelect;return t.map((function(e){var t=e.farm,n=e.server,c=e.secret,o=e.id,i=e.title;return r.a.createElement("div",{onClick:function(){return a(e)},key:o},r.a.createElement("img",{src:"https://farm".concat(t,".staticflickr.com/").concat(n,"/").concat(o,"_").concat(c,".jpg"),alt:"searched",title:i,className:"images"}))}))},_=function(e){var t=e.onDismiss,a=e.children;return Object(n.useEffect)((function(){window.addEventListener("keydown",(function(e){27===e.keyCode&&t()}))}),[t]),o.a.createPortal(r.a.createElement("div",{className:"portal",onClick:t},a),document.querySelector("#portal"))},I=function(e){var t=e.changeTheme,a=Object(n.useState)(!1),c=Object(f.a)(a,2),o=c[0],i=c[1];Object(n.useEffect)((function(){var e=localStorage.getItem("theme")?localStorage.getItem("theme"):null;t("dark"===e?"dark":"light"),i("dark"===e)}),[t]);return r.a.createElement("header",{className:"header"},r.a.createElement("a",{className:"link",href:"https://www.github.com/inPhoenix/imageSearch",rel:"noopener noreferrer",target:"_blank"},"GitHub"),r.a.createElement("div",{className:"theme-switch-wrapper"},r.a.createElement("em",null,"Light"),r.a.createElement("label",{className:"theme-switch",htmlFor:"checkbox"},r.a.createElement("input",{type:"checkbox",id:"checkbox",onChange:function(){i(!o),t(o?"light":"dark"),localStorage.setItem("theme",o?"light":"dark")},checked:o}),r.a.createElement("div",{className:"slider round"})),r.a.createElement("em",null,"Dark")))},N=Object(i.b)((function(e){return{images:e.images.data.photo,selectedImage:e.images.selected,isLoading:e.images.isLoading,error:e.images.error}}),{searchImages:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n,r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"&format=json&nojsoncallback=1&sort=interestingness-desc",n="?method=flickr.photos.search&text=".concat(e,"&api_key=").concat("26797c5aee7a0523e67a8d93ef025457").concat("&format=json&nojsoncallback=1&sort=interestingness-desc"),t.prev=2,a(j(!0)),t.next=6,O.get(n);case 6:"ok"===(r=t.sent).data.stat&&a({type:"FETCH_IMAGES",payload:r.data.photos}),"fail"===r.data.stat&&a({type:"ADD_ERROR",error:r.data.message}),a(j(!1)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(2),console.error(t.t0),a(j(!1)),a({type:"ADD_ERROR",error:t.t0.message||"Something went wrong"});case 17:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}()},selectImage:function(e){return{type:"IMAGE_SELECTED",payload:e}},changeTheme:k})((function(e){var t=e.images,a=e.searchImages,c=e.selectImage,o=e.selectedImage,i=e.isLoading,s=e.error,l=e.changeTheme;Object(n.useEffect)((function(){a("landscapes")}),[a]);var u=Object(n.useCallback)(y((function(e){return a(e)}),300),[]),m=Object(n.useState)(""),h=Object(f.a)(m,2),g=h[0],d=h[1],p=Object(n.useState)(1),E=Object(f.a)(p,2),b=E[0],v=E[1],O=Object(n.useState)(20),j=Object(f.a)(O,1)[0],k=Object(n.useState)(!1),N=Object(f.a)(k,2),T=N[0],C=N[1],D=b*j,L=D-j,A=t&&t.slice(L,D),x=function(){C(!1)};return r.a.createElement("div",{className:"wrapper"},r.a.createElement(I,{changeTheme:l}),T&&function(){var e=o.farm,t=o.server,a=o.id,n=o.secret;return r.a.createElement(_,{onDismiss:x},r.a.createElement("img",{alt:"selected",src:"https://farm".concat(e,".staticflickr.com/").concat(t,"/").concat(a,"_").concat(n,".jpg")}))}(),r.a.createElement(w,{imagesPerPage:j,totalPosts:t&&t.length,paginate:function(e){return v(e)}}),r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{value:g,onChange:function(e){d(e.target.value),u(e.target.value)},className:"input",placeholder:"search"})),r.a.createElement("div",{className:"item"},i&&r.a.createElement(r.a.Fragment,null," Loading... "),s&&r.a.createElement(r.a.Fragment,null," ",s," "),t&&r.a.createElement(S,{images:A,onImageSelect:function(e){c(e),C(!0)}})))})),T=a(10);function C(){var e=Object(d.a)(["\n  body {\n    color: ",";\n    background: ",';\n    box-sizing: border-box;\n   \n    font-family: "American Typewriter", Helvetica;\n  }']);return C=function(){return e},e}var D=Object(T.b)(C(),(function(e){return"light"===e.theme.bg?"#2f3a90":"#6788e2"}),(function(e){return"light"===e.theme.bg?"azure":"black"})),L=Object(i.b)((function(e){return{theme:e.themes.theme}}))((function(e){var t={bg:e.theme};return r.a.createElement(T.a,{theme:t},r.a.createElement(D,{whiteColor:!1}),r.a.createElement(N,{changeTheme:k}))})),A=(a(63),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d),x=Object(l.e)(g,A(Object(l.a)(s.a)));o.a.render(r.a.createElement(i.a,{store:x},r.a.createElement(L,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.0bf811cc.chunk.js.map