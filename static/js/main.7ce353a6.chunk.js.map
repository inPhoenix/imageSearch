{"version":3,"sources":["apis/flickr.js","utils/debounce.js","components/Pagination.js","components/Images.js","components/Modal.js","components/App.js","actions/index.js","secrets.js","actions/types.js","reducers/imageReducer.js","reducers/index.js","index.js"],"names":["axios","create","baseURL","debounce","func","waitTime","timeout","args","clearTimeout","setTimeout","apply","Pagination","imagesPerPage","totalPosts","paginate","useState","page","setPage","pageNumbers","i","Math","round","push","classname","number","join","className","map","key","onClick","handlePaginate","Images","images","onImageSelect","image","farm","server","secret","id","title","src","alt","Modal","onDismiss","children","useEffect","window","addEventListener","event","keyCode","ReactDOM","createPortal","document","querySelector","connect","state","data","photo","selectedImage","selected","searchImages","searchTerm","dispatch","a","endpoint","flickr","get","response","type","payload","photos","console","error","selectImage","delayedSearch","useCallback","q","value","setValue","currentPage","setCurrentPage","showModal","setShowModal","indexOfLastImage","indexOfFirstImage","currentImage","slice","closeModal","renderModal","length","pageNumber","onChange","target","placeholder","INITIAL_STATE","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render","getElementById"],"mappings":"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","file":"static/js/main.7ce353a6.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport default axios.create({\n    baseURL: \"https://www.flickr.com/services/rest/\"\n});\n","const debounce = (func, waitTime) => {\n    let timeout;\n    return (...args) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), waitTime);\n    };\n};\n\nexport default debounce;\n","import React, { useState } from \"react\";\nimport { number, func } from \"prop-types\";\n\nconst Pagination = ({ imagesPerPage, totalPosts, paginate }) => {\n  const [page, setPage] = useState(1);\n  const pageNumbers = [];\n\n  for (let i = 1; i <= Math.round(totalPosts / imagesPerPage); i++) {\n    pageNumbers.push(i);\n  }\n\n  const handlePaginate = number => {\n    paginate(number);\n    setPage(number);\n  };\n\n  const classname = number =>\n    [\"page-item\", page === number ? \"selected\" : \"\"].join(\" \");\n\n  return (\n    <nav>\n      <ul className=\"pagination-container\">\n        {pageNumbers.map(number => (\n          <li\n            key={number}\n            className={classname(number)}\n            onClick={() => handlePaginate(number)}\n          >\n            <div>{number}</div>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nPagination.propTypes = {\n  imagesPerPage: number.isRequired,\n  totalPosts: number.isRequired,\n  paginate: func.isRequired\n};\n\nexport default Pagination;\n","import React from \"react\";\nimport { array, func } from \"prop-types\";\n\nconst Images = ({ images, onImageSelect }) => {\n  return images.map(image => {\n    const { farm, server, secret, id, title } = image;\n\n    return (\n      <div onClick={() => onImageSelect(image)} key={id}>\n        <img\n          src={`https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`}\n          alt=\"searched\"\n          title={title}\n          className=\"images\"\n        />\n      </div>\n    );\n  });\n};\n\nImages.propTypes = {\n  images: array.isRequired,\n  onImageSelect: func.isRequired\n};\n\nexport default Images;\n","import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { func, node } from \"prop-types\";\n\nconst Modal = ({ onDismiss, children }) => {\n  useEffect(() => {\n    const handleEsc = event => {\n      event.keyCode === 27 && onDismiss();\n    };\n    window.addEventListener(\"keydown\", handleEsc);\n  }, [onDismiss]);\n\n  return ReactDOM.createPortal(\n    <div className=\"portal\" onClick={onDismiss}>\n      <div className=\"close-modal\">Press Esc To close</div>\n      {children}\n    </div>,\n    document.querySelector(\"#portal\")\n  );\n};\n\nModal.propTypes = {\n  onDismiss: func.isRequired,\n  children: node.isRequired\n};\n\nexport default Modal;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { searchImages, selectImage } from \"../actions\";\nimport debounce from \"../utils/debounce\";\nimport Pagination from \"./Pagination\";\nimport Images from \"./Images\";\nimport Modal from \"./Modal\";\n\nconst App = ({ images, searchImages, selectImage, selectedImage }) => {\n  useEffect(() => {\n    searchImages(\"landscapes\");\n  }, [searchImages]);\n\n  const delayedSearch = useCallback(\n    debounce(q => searchImages(q), 300),\n    []\n  );\n\n  const [value, setValue] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [imagesPerPage] = useState(20);\n  const [showModal, setShowModal] = useState(false);\n\n  const indexOfLastImage = currentPage * imagesPerPage;\n  const indexOfFirstImage = indexOfLastImage - imagesPerPage;\n  const currentImage =\n    images && images.slice(indexOfFirstImage, indexOfLastImage);\n  const paginate = pageNumber => setCurrentPage(pageNumber);\n\n  const handleChange = event => {\n    setValue(event.target.value);\n    delayedSearch(event.target.value);\n  };\n\n  const handleImageSelect = photo => {\n    selectImage(photo);\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  const renderModal = () => {\n    const { farm, server, id, secret } = selectedImage;\n    return (\n      <Modal onDismiss={closeModal}>\n        <img\n          alt=\"selected\"\n          src={`https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`}\n        />\n      </Modal>\n    );\n  };\n\n  return (\n    <div className=\"wrapper\">\n      {showModal && renderModal(images)}\n      <Pagination\n        imagesPerPage={imagesPerPage}\n        totalPosts={images && images.length}\n        paginate={paginate}\n      />\n\n      <div className=\"input-container\">\n        <input\n          value={value}\n          onChange={handleChange}\n          className=\"input\"\n          placeholder=\"search\"\n        />\n      </div>\n      <div className=\"item\">\n        {images && (\n          <Images images={currentImage} onImageSelect={handleImageSelect} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    images: state.images.data.photo,\n    selectedImage: state.images.selected\n  };\n};\n\nexport default connect(mapStateToProps, { searchImages, selectImage })(App);\n","import { FETCH_IMAGES, IMAGE_SELECTED } from \"./types\";\nimport { API_KEY } from \"../secrets\";\nimport flickr from \"../apis/flickr\";\n\nexport const searchImages = searchTerm => async dispatch => {\n  const endpoint = `?method=flickr.photos.search&text=${searchTerm}&api_key=${API_KEY}&format=json&nojsoncallback=1`;\n  try {\n    const response = await flickr.get(endpoint);\n    dispatch({ type: FETCH_IMAGES, payload: response.data.photos });\n  } catch (e) {\n    console.error(e);\n  }\n};\n\nexport const selectImage = image => ({\n  type: IMAGE_SELECTED,\n  payload: image\n});\n","// Add your flick API KEY\nexport const API_KEY = `26797c5aee7a0523e67a8d93ef025457`;\n","export const FETCH_IMAGES = \"FETCH_IMAGES\";\nexport const IMAGE_SELECTED = \"IMAGE_SELECTED\";\n","import { FETCH_IMAGES, IMAGE_SELECTED } from \"../actions/types\";\n\nconst INITIAL_STATE = {\n  selected: '',\n  data: {\n    photo: []\n  }\n};\n\nexport default (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case FETCH_IMAGES:\n      return {\n        ...state,\n        data: {\n          ...action.payload\n        }\n      };\n    case IMAGE_SELECTED:\n      return {\n        ...state,\n        selected: action.payload\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport images from \"./imageReducer\";\n\nexport default combineReducers({\n    images\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport reduxThunk from \"redux-thunk\";\nimport { applyMiddleware, compose, createStore } from \"redux\";\n\nimport App from \"./components/App\";\nimport reducers from \"./reducers\";\n\nimport \"./index.scss\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}