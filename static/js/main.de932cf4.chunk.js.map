{"version":3,"sources":["apis/flickr.js","actions/index.js","actions/types.js","utils/debounce.js","components/Pagination.js","components/Images.js","components/Modal.js","components/Header.js","components/App.js","secrets.js","reducers/imageReducer.js","reducers/index.js","index.js"],"names":["axios","create","baseURL","setLoading","state","type","status","debounce","func","waitTime","timeout","args","clearTimeout","setTimeout","apply","Pagination","imagesPerPage","totalPosts","paginate","useState","page","setPage","pageNumbers","i","Math","round","push","classname","number","join","className","map","key","onClick","handlePaginate","Images","images","onImageSelect","image","farm","server","secret","id","title","src","alt","Modal","onDismiss","children","useEffect","window","addEventListener","event","keyCode","ReactDOM","createPortal","document","querySelector","Header","href","rel","target","connect","data","photo","selectedImage","selected","isLoading","error","searchImages","searchTerm","dispatch","a","endpoint","flickr","get","response","stat","payload","photos","message","console","selectImage","delayedSearch","useCallback","q","value","setValue","currentPage","setCurrentPage","showModal","setShowModal","indexOfLastImage","indexOfFirstImage","currentImage","slice","closeModal","renderModal","length","pageNumber","onChange","placeholder","INITIAL_STATE","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render","getElementById"],"mappings":"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","file":"static/js/main.de932cf4.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport default axios.create({\n    baseURL: \"https://www.flickr.com/services/rest/\"\n});\n","import { FETCH_IMAGES, IMAGE_SELECTED, IS_LOADING, ADD_ERROR } from \"./types\";\nimport { API_KEY } from \"../secrets\";\nimport flickr from \"../apis/flickr\";\n\nexport const searchImages = searchTerm => async dispatch => {\n  const endpoint = `?method=flickr.photos.search&text=${searchTerm}&api_key=${API_KEY}&format=json&nojsoncallback=1`;\n  try {\n    dispatch(setLoading(true));\n    const response = await flickr.get(endpoint);\n    if (response.data.stat === \"ok\") {\n      dispatch({ type: FETCH_IMAGES, payload: response.data.photos });\n    }\n    if (response.data.stat === \"fail\") {\n      dispatch({\n        type: ADD_ERROR,\n        error: response.data.message\n      });\n    }\n\n    dispatch(setLoading(false));\n  } catch (e) {\n    console.error(e);\n    dispatch(setLoading(false));\n    dispatch({ type: ADD_ERROR, error: e.message || \"Something went wrong\" });\n  }\n};\n\nexport const selectImage = image => ({\n  type: IMAGE_SELECTED,\n  payload: image\n});\n\nconst setLoading = state => {\n  return { type: IS_LOADING, status: state };\n};\n","export const FETCH_IMAGES = \"FETCH_IMAGES\";\nexport const IMAGE_SELECTED = \"IMAGE_SELECTED\";\nexport const IS_LOADING = \"IS_LOADING\";\nexport const ADD_ERROR = \"ADD_ERROR\";\n","const debounce = (func, waitTime) => {\n    let timeout;\n    return (...args) => {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), waitTime);\n    };\n};\n\nexport default debounce;\n","import React, { useState } from \"react\";\nimport { number, func } from \"prop-types\";\n\nconst Pagination = ({ imagesPerPage, totalPosts, paginate }) => {\n  const [page, setPage] = useState(1);\n  const pageNumbers = [];\n\n  for (let i = 1; i <= Math.round(totalPosts / imagesPerPage); i++) {\n    pageNumbers.push(i);\n  }\n\n  const handlePaginate = number => {\n    paginate(number);\n    setPage(number);\n  };\n\n  const classname = number =>\n    [\"page-item\", page === number ? \"selected\" : \"\"].join(\" \");\n\n  return (\n    <nav>\n      <ul className=\"pagination-container\">\n        {pageNumbers.map(number => (\n          <li\n            key={number}\n            className={classname(number)}\n            onClick={() => handlePaginate(number)}\n          >\n            <div>{number}</div>\n          </li>\n        ))}\n      </ul>\n    </nav>\n  );\n};\n\nPagination.propTypes = {\n  imagesPerPage: number.isRequired,\n  totalPosts: number.isRequired,\n  paginate: func.isRequired\n};\n\nexport default Pagination;\n","import React from \"react\";\nimport { array, func } from \"prop-types\";\n\nconst Images = ({ images, onImageSelect }) => {\n  return images.map(image => {\n    const { farm, server, secret, id, title } = image;\n\n    return (\n      <div onClick={() => onImageSelect(image)} key={id}>\n        <img\n          src={`https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`}\n          alt=\"searched\"\n          title={title}\n          className=\"images\"\n        />\n      </div>\n    );\n  });\n};\n\nImages.propTypes = {\n  images: array.isRequired,\n  onImageSelect: func.isRequired\n};\n\nexport default Images;\n","import React, { useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { func, node } from \"prop-types\";\n\nconst Modal = ({ onDismiss, children }) => {\n  useEffect(() => {\n    const handleEsc = event => {\n      event.keyCode === 27 && onDismiss();\n    };\n    window.addEventListener(\"keydown\", handleEsc);\n  }, [onDismiss]);\n\n  return ReactDOM.createPortal(\n    <div className=\"portal\" onClick={onDismiss}>\n      {children}\n    </div>,\n    document.querySelector(\"#portal\")\n  );\n};\n\nModal.propTypes = {\n  onDismiss: func.isRequired,\n  children: node.isRequired\n};\n\nexport default Modal;\n","import React from \"react\";\n\nconst Header = () => {\n  return (\n    <header className=\"header\">\n      <a\n        className=\"link\"\n        href=\"https://www.github.com/inPhoenix/imageSearch\"\n        rel=\"noopener noreferrer\"\n        target=\"_blank\"\n      >\n        GitHub\n      </a>\n    </header>\n  );\n};\n\nexport default Header;\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { searchImages, selectImage } from \"../actions\";\nimport debounce from \"../utils/debounce\";\nimport Pagination from \"./Pagination\";\nimport Images from \"./Images\";\nimport Modal from \"./Modal\";\nimport Header from \"./Header\";\n\nconst App = ({\n  images,\n  searchImages,\n  selectImage,\n  selectedImage,\n  isLoading,\n  error\n}) => {\n  useEffect(() => {\n    searchImages(\"landscapes\");\n  }, [searchImages]);\n\n  const delayedSearch = useCallback(\n    debounce(q => searchImages(q), 300),\n    []\n  );\n\n  const [value, setValue] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [imagesPerPage] = useState(20);\n  const [showModal, setShowModal] = useState(false);\n\n  const indexOfLastImage = currentPage * imagesPerPage;\n  const indexOfFirstImage = indexOfLastImage - imagesPerPage;\n  const currentImage =\n    images && images.slice(indexOfFirstImage, indexOfLastImage);\n  const paginate = pageNumber => setCurrentPage(pageNumber);\n\n  const handleChange = event => {\n    setValue(event.target.value);\n    delayedSearch(event.target.value);\n  };\n\n  const handleImageSelect = photo => {\n    selectImage(photo);\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  const renderModal = () => {\n    const { farm, server, id, secret } = selectedImage;\n    return (\n      <Modal onDismiss={closeModal}>\n        <img\n          alt=\"selected\"\n          src={`https://farm${farm}.staticflickr.com/${server}/${id}_${secret}.jpg`}\n        />\n      </Modal>\n    );\n  };\n\n  return (\n    <div className=\"wrapper\">\n      <Header />\n      {showModal && renderModal(images)}\n      <Pagination\n        imagesPerPage={imagesPerPage}\n        totalPosts={images && images.length}\n        paginate={paginate}\n      />\n\n      <div className=\"input-container\">\n        <input\n          value={value}\n          onChange={handleChange}\n          className=\"input\"\n          placeholder=\"search\"\n        />\n      </div>\n      <div className=\"item\">\n        {isLoading && <> Loading... </>}\n        {error && <> {error} </>}\n        {images && (\n          <Images images={currentImage} onImageSelect={handleImageSelect} />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => {\n  return {\n    images: state.images.data.photo,\n    selectedImage: state.images.selected,\n    isLoading: state.images.isLoading,\n    error: state.images.error\n  };\n};\n\nexport default connect(mapStateToProps, { searchImages, selectImage })(App);\n","// Add your flick API KEY\nexport const API_KEY = `26797c5aee7a0523e67a8d93ef025457`;\n","import {\n  FETCH_IMAGES,\n  IMAGE_SELECTED,\n  IS_LOADING,\n  ADD_ERROR\n} from \"../actions/types\";\n\nconst INITIAL_STATE = {\n  selected: \"\",\n  isLoading: false,\n  error: \"\",\n  data: {\n    photo: []\n  }\n};\n\nexport default (state = INITIAL_STATE, action) => {\n  switch (action.type) {\n    case FETCH_IMAGES:\n      return {\n        ...state,\n        data: {\n          ...action.payload\n        },\n        error: ''\n      };\n    case IMAGE_SELECTED:\n      return {\n        ...state,\n        selected: action.payload\n      };\n    case IS_LOADING:\n      return {\n        ...state,\n        isLoading: action.status\n      };\n    case ADD_ERROR:\n      return {\n        ...state,\n        error: action.error\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport images from \"./imageReducer\";\n\nexport default combineReducers({\n    images\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport reduxThunk from \"redux-thunk\";\nimport { applyMiddleware, compose, createStore } from \"redux\";\n\nimport App from \"./components/App\";\nimport reducers from \"./reducers\";\n\nimport \"./index.scss\";\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(\n  reducers,\n  composeEnhancers(applyMiddleware(reduxThunk))\n);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}